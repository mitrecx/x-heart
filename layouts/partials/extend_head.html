<style>
/* 重置并清理代码块样式 - 主题适配 */

/* 彻底重置所有代码块相关的背景和边框 */
.post-content .highlight:not(table),
.post-content .highlight,
.post-content pre,
.post-content pre code,
.chroma,
div.highlight {
    background: none !important;
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 0 !important;
}

/* 定义主题变量 */
:root {
    --code-bg-custom: #f8f9fa;
    --code-text-custom: #24292e;
    --code-border-custom: #e1e4e8;
    --code-comment: #6a737d;
    --code-keyword: #d73a49;
    --code-string: #032f62;
    --code-function: #6f42c1;
    --code-number: #005cc5;
    --code-builtin: #e36209;
}

.dark {
    --code-bg-custom: #0d1117;
    --code-text-custom: #e6edf3;
    --code-border-custom: #30363d;
    --code-comment: #7d8590;
    --code-keyword: #ff7b72;
    --code-string: #a5d6ff;
    --code-function: #d2a8ff;
    --code-number: #79c0ff;
    --code-builtin: #ffa657;
}

/* 仅为最外层的highlight div设置样式 */
.post-content div.highlight {
    background: var(--code-bg-custom) !important;
    color: var(--code-text-custom) !important;
    border: 1px solid var(--code-border-custom) !important;
    border-radius: 8px !important;
    padding: 16px !important;
    margin: 1.5em 0 !important;
    overflow-x: auto !important;
    position: relative !important;
}

/* 确保内部pre和code无额外样式 */
.post-content div.highlight pre,
.post-content div.highlight pre code {
    background: transparent !important;
    color: inherit !important;
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 0 !important;
    display: block !important;
}

/* 内联代码样式 */
.post-content code:not(.chroma code):not(pre code) {
    background: var(--code-bg) !important;
    color: var(--content) !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    font-size: 0.9em !important;
    border: 1px solid var(--border) !important;
    font-family: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace !important;
}

/* 语法高亮颜色 */
.chroma .c, .chroma .c1, .chroma .cm, .chroma .cs {
    color: var(--code-comment) !important;
    font-style: italic !important;
}

.chroma .k, .chroma .kd, .chroma .kn, .chroma .kp, .chroma .kr, .chroma .kt {
    color: var(--code-keyword) !important;
    font-weight: bold !important;
}

.chroma .s, .chroma .s1, .chroma .s2, .chroma .sb, .chroma .sc, 
.chroma .sd, .chroma .se, .chroma .sh, .chroma .si, .chroma .sx {
    color: var(--code-string) !important;
}

.chroma .nf, .chroma .fm {
    color: var(--code-function) !important;
    font-weight: bold !important;
}

.chroma .m, .chroma .mb, .chroma .mf, .chroma .mh, .chroma .mi, .chroma .mo {
    color: var(--code-number) !important;
}

.chroma .nb, .chroma .bp {
    color: var(--code-builtin) !important;
}

/* 确保所有其他chroma元素继承正确的颜色 */
.chroma * {
    background: transparent !important;
}

/* 复制按钮样式 */
.copy-code {
    background: rgba(0, 0, 0, 0.7) !important;
    color: white !important;
    font-size: 12px !important;
    padding: 4px 8px !important;
    border-radius: 4px !important;
}

.dark .copy-code {
    background: rgba(255, 255, 255, 0.8) !important;
    color: black !important;
}

/* 确保没有其他元素干扰 */
.highlight pre.chroma {
    background: transparent !important;
}

/* 宽屏显示器优化样式 */
/* 超宽屏显示器上的内容宽度优化 */
@media screen and (min-width: 1600px) {
    .main {
        max-width: calc(1300px + 48px) !important;
    }
    
    .nav {
        max-width: calc(1300px + 48px) !important;
    }
    
    /* 文章内容区域优化 */
    .post-content-container {
        gap: 3rem !important;
    }
    
    .toc-sidebar {
        flex: 0 0 280px !important;
    }
}

@media screen and (min-width: 1920px) {
    .main {
        max-width: calc(1500px + 48px) !important;
    }
    
    .nav {
        max-width: calc(1500px + 48px) !important;
    }
    
    .post-content-container {
        gap: 4rem !important;
    }
    
    .toc-sidebar {
        flex: 0 0 300px !important;
    }
}

@media screen and (min-width: 2560px) {
    .main {
        max-width: calc(1700px + 48px) !important;
    }
    
    .nav {
        max-width: calc(1700px + 48px) !important;
    }
    
    .post-content-container {
        gap: 5rem !important;
    }
    
    .toc-sidebar {
        flex: 0 0 320px !important;
    }
}

/* 确保在超宽屏上内容不会过于拉伸 */
@media screen and (min-width: 1600px) {
    .post-content {
        max-width: 100% !important;
        line-height: 1.8 !important;
    }
    
    .post-content p {
        max-width: 100% !important;
    }
}

/* 优化宽屏上的图片显示 */
@media screen and (min-width: 1600px) {
    .post-content img {
        max-width: 100% !important;
        height: auto !important;
    }
    
    .post-content figure {
        max-width: 100% !important;
    }
}
</style> 